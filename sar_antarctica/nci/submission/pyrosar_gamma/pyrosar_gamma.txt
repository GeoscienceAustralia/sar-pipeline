#!/bin/bash

#PBS -l ncpus=<NCPU>
#PBS -l mem=<MEM>GB
#PBS -q normal
#PBS -P u46
#PBS -l walltime=02:00:00
#PBS -l storage=gdata/yp75+gdata/dg9+gdata/fj7+gdata/v10
#PBS -l wd
#PBS -o <PROCESSING_DIR>/submission/logs/<SCENE_ID>
#PBS -e <PROCESSING_DIR>/submission/logs/<SCENE_ID>
#PBS -N <SCENE_ID>

# Load the module
module use /g/data/yp75/modules/modulefiles
module load sar-antarctica/test-20250108

# Activate micromamba environment
micromamba activate sar-antarctica

# Run preparation script
cd /g/data/yp75/ca6983/repositories/sar-antarctica/sar_antarctica/nci/preparation/
python create_config.py <SCENE_ID> <SCENE_CONFIG>

# Run preocessing script
cd /g/data/yp75/ca6983/repositories/sar-antarctica/sar_antarctica/nci/processing/pyroSAR/
python pyrosar_geocode.py <WORKFLOW_CONFIG> <SCENE_CONFIG>