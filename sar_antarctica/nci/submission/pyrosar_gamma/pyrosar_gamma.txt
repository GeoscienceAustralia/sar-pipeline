#!/bin/bash

#PBS -l ncpus=<NCPU>
#PBS -l mem=<MEM>GB
#PBS -q <QUEUE>
#PBS -P <PROJECT>
#PBS -l walltime=<WALLTIME>
#PBS -l storage=<STORAGE>
#PBS -l wd
#PBS -o <LOG_DIR>/<SCENE_ID>
#PBS -e <LOG_DIR>/<SCENE_ID>
#PBS -N <SCENE_ID>

# Load the module
module use /g/data/yp75/modules/modulefiles
module load sar-antarctica/v0.1

# Activate micromamba environment
micromamba activate sar-antarctica

# Run preparation script
cd /g/data/yp75/ca6983/repositories/sar-antarctica/sar_antarctica/nci/preparation/
python create_config.py <SCENE_ID> <SCENE_CONFIG>

# Run preocessing script
cd /g/data/yp75/ca6983/repositories/sar-antarctica/sar_antarctica/nci/processing/pyroSAR/
python pyrosar_geocode.py <WORKFLOW_CONFIG> <SCENE_CONFIG>